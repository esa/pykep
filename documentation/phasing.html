
<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>The phasing module &mdash; PyKEP 1.2.2dev documentation</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootswatch-3.2.0/united/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pykep-styles.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.2.2dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.2.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="PyKEP 1.2.2dev documentation" href="../index.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

  <div id="navbar" class="navbar navbar-inverse navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          PyKEP</a>
        <span class="navbar-text navbar-version pull-left"><b>1.2</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="../installation.html">Install</a></li>
                <li><a href="index.html">Docs</a></li>
                <li><a href="../examples/index.html">Examples</a></li>
                <li><a href="../credits.html">Credits</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"></ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">The phasing module</a><ul>
<li><a class="reference internal" href="#detailed-documentation">Detailed Documentation</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="the-phasing-module">
<span id="phasing"></span><h1>The phasing module<a class="headerlink" href="#the-phasing-module" title="Permalink to this headline">¶</a></h1>
<table border="1" class="docutils">
<colgroup>
<col width="38%" />
<col width="7%" />
<col width="55%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference internal" href="#PyKEP.phasing.knn" title="PyKEP.phasing.knn"><tt class="xref py py-class docutils literal"><span class="pre">PyKEP.phasing.knn</span></tt></a></td>
<td>class</td>
<td>Finds the nearest-neighbour in a large list of <tt class="xref py py-class docutils literal"><span class="pre">PyKEP.planet</span></tt></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#PyKEP.phasing.dbscan" title="PyKEP.phasing.dbscan"><tt class="xref py py-class docutils literal"><span class="pre">PyKEP.phasing.dbscan</span></tt></a></td>
<td>class</td>
<td>Detects clusters in a large list of <tt class="xref py py-class docutils literal"><span class="pre">PyKEP.planet</span></tt></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#PyKEP.phasing.three_impulses_approx" title="PyKEP.phasing.three_impulses_approx"><tt class="xref py py-func docutils literal"><span class="pre">PyKEP.phasing.three_impulses_approx()</span></tt></a></td>
<td>function</td>
<td>Computes the orbital transfer cost between two <tt class="xref py py-class docutils literal"><span class="pre">PyKEP.planet</span></tt></td>
</tr>
</tbody>
</table>
<div class="section" id="detailed-documentation">
<h2>Detailed Documentation<a class="headerlink" href="#detailed-documentation" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="PyKEP.phasing.knn">
<em class="property">class </em><tt class="descclassname">PyKEP.phasing.</tt><tt class="descname">knn</tt><big>(</big><em>*args</em><big>)</big><a class="headerlink" href="#PyKEP.phasing.knn" title="Permalink to this definition">¶</a></dt>
<dd><p>The class finds the k-nearest neighbours to a given planet from a list of planets.
The problem of finding who is &#8220;close-by&#8221; can be efficiently solved using appropriate data structures.
Here a kdtree is employed bringng complexity down to O(log N). The k-d-tree can then be queried efficiently
for all asteroid within a given distance (&#8216;ball&#8217; query) or for all k closest asteroids (&#8216;knn&#8217; query).</p>
<p>The notion of distance used (metric) can be:</p>
<ul class="simple">
<li>&#8216;euclidean&#8217;: the simple Euclidean distance over the asteroid&#8217;s (r,v). The position an velocity vectors are scaled w.r.t. some</li>
</ul>
<p>reference values.</p>
<ul class="simple">
<li>&#8216;orbital&#8217;, the distance is computed with respect to (r/T + v, r/T), coresponding to the DV computed over a linear model of the orbital transfer.</li>
</ul>
<p>The distance returned will thus be in m/s.</p>
<dl class="method">
<dt id="PyKEP.phasing.knn.__init__">
<tt class="descname">__init__</tt><big>(</big><em>*args</em><big>)</big><a class="headerlink" href="#PyKEP.phasing.knn.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>USAGE: knn = knn(planet_list, t, metric=&#8217;orbital&#8217;, ref_r=AU, ref_v=EARTH_VELOCITY, T=365.25):</p>
<ul class="simple">
<li>planet_list   list of PyKEP planets (typically thousands)</li>
<li>t             epoch</li>
<li>metric        one of [&#8216;euclidean&#8217;, &#8216;orbital&#8217;]</li>
<li>ref_r         reference radius   (used as a scaling factor for r if the metric is &#8216;euclidean&#8217;)</li>
<li>ref_v         reference velocity (used as a scaling factor for v if the metric is &#8216;euclidean&#8217;)</li>
<li>T             average transfer time (used in the definition of the &#8216;orbital&#8217; metric)</li>
</ul>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">PyKEP</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">pl_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">planet</span><span class="o">.</span><span class="n">gtoc7</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">16257</span><span class="p">)]</span>
<span class="n">knn</span> <span class="o">=</span> <span class="n">phasing</span><span class="o">.</span><span class="n">knn</span><span class="p">(</span><span class="n">pl_list</span><span class="p">,</span> <span class="n">epoch</span><span class="p">(</span><span class="n">t0</span><span class="p">),</span> <span class="n">metric</span><span class="o">=</span><span class="s">&#39;orbital&#39;</span><span class="p">,</span> <span class="n">T</span><span class="o">=</span><span class="mi">180</span><span class="p">)</span>
<span class="n">neighb</span><span class="p">,</span> <span class="n">ids</span><span class="p">,</span> <span class="n">dists</span> <span class="o">=</span> <span class="n">knn</span><span class="o">.</span><span class="n">find_neighbours</span><span class="p">(</span><span class="n">pl_list</span><span class="p">[</span><span class="n">ast_0</span><span class="p">],</span> <span class="n">query_type</span><span class="o">=</span><span class="s">&#39;knn&#39;</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">10000</span><span class="p">)</span>
<span class="n">neighb</span><span class="p">,</span> <span class="n">ids</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">knn</span><span class="o">.</span><span class="n">find_neighbours</span><span class="p">(</span><span class="n">pl_list</span><span class="p">[</span><span class="n">ast_0</span><span class="p">],</span> <span class="n">query_type</span><span class="o">=</span><span class="s">&#39;ball&#39;</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="mi">5000</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="PyKEP.phasing.knn.find_neighbours">
<tt class="descname">find_neighbours</tt><big>(</big><em>*args</em><big>)</big><a class="headerlink" href="#PyKEP.phasing.knn.find_neighbours" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds the neighbours of a given planet at a given epoch. The user may query for the
k-nearest neighbours or for all neighbours within a given distance</p>
<p>knn.find_neighbours(query_planet, query_type=&#8217;knn&#8217;, *args, **kwargs )</p>
<ul class="simple">
<li>query_planet: the planet we want to find neighbours of. Can be an integer, in which case it refers to the idx in self.asteroid_list</li>
<li>query_type: one of &#8216;knn&#8217; or &#8216;ball&#8217;.</li>
<li>*args, **args: according to the query type (read below)</li>
</ul>
<p>Returns (neighb, neighb_ids, dists), where dist is only computed if &#8216;knn&#8217; type query is made</p>
<p>The following kinds of spatial queries are currently implemented:</p>
<dl class="docutils">
<dt>query_type = &#8216;knn&#8217;:</dt>
<dd>The kwarg &#8216;k&#8217; determines how many k-nearest neighbours are returned
For arguments, see:
<a class="reference external" href="http://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.cKDTree.query.html">http://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.cKDTree.query.html</a></dd>
<dt>query_type = &#8216;ball&#8217;:</dt>
<dd>The kwarg &#8216;r&#8217; determines the distance within which all asteroids are returned.
For arguments, see:
<a class="reference external" href="http://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.cKDTree.query_ball_point.html">http://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.cKDTree.query_ball_point.html</a></dd>
</dl>
</dd></dl>

</dd></dl>

<hr class="docutils" />
<dl class="class">
<dt id="PyKEP.phasing.dbscan">
<em class="property">class </em><tt class="descclassname">PyKEP.phasing.</tt><tt class="descname">dbscan</tt><big>(</big><em>*args</em><big>)</big><a class="headerlink" href="#PyKEP.phasing.dbscan" title="Permalink to this definition">¶</a></dt>
<dd><p>This class can be used to locate areas of the interplanetsry space that are &#8216;dense&#8217; at one epoch.
Essentially, it locates planet clusters</p>
<dl class="method">
<dt id="PyKEP.phasing.dbscan.__init__">
<tt class="descname">__init__</tt><big>(</big><em>*args</em><big>)</big><a class="headerlink" href="#PyKEP.phasing.dbscan.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>USAGE: cl = dbscan(planet_list):</p>
<ul class="simple">
<li>planet_list = list of PyKEP planets (typically thousands)</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="PyKEP.phasing.dbscan.cluster">
<tt class="descname">cluster</tt><big>(</big><em>*args</em><big>)</big><a class="headerlink" href="#PyKEP.phasing.dbscan.cluster" title="Permalink to this definition">¶</a></dt>
<dd><p>USAGE: cl.cluster(t, eps=0.125, min_samples=10, metric=&#8217;orbital&#8217;, T=180, ref_r=AU, ref_v=EARTH_VELOCITY):</p>
<ul class="simple">
<li>t: epoch (in MJD2000)</li>
<li>eps: max distance between points in a cluster</li>
<li>min_samples: minimum number of samples per cluster</li>
<li>metric: one of &#8216;euclidean&#8217;, &#8216;euclidean_r&#8217;, orbital&#8217;</li>
<li>T: average transfer time (used in the definition of the &#8216;orbital&#8217; metric)</li>
<li>ref_r         reference radius   (used as a scaling factor for r if the metric is &#8216;euclidean&#8217; or &#8216;euclidean_r&#8217;)</li>
<li>ref_v         reference velocity (used as a scaling factor for v if the metric is &#8216;euclidean&#8217;)</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="PyKEP.phasing.dbscan.pretty">
<tt class="descname">pretty</tt><big>(</big><em>*args</em><big>)</big><a class="headerlink" href="#PyKEP.phasing.dbscan.pretty" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints the cluster lists.</p>
</dd></dl>

<dl class="method">
<dt id="PyKEP.phasing.dbscan.plot">
<tt class="descname">plot</tt><big>(</big><em>*args</em><big>)</big><a class="headerlink" href="#PyKEP.phasing.dbscan.plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Plots the clusters.</p>
</dd></dl>

</dd></dl>

<hr class="docutils" />
<dl class="function">
<dt id="PyKEP.phasing.three_impulses_approx">
<tt class="descclassname">PyKEP.phasing.</tt><tt class="descname">three_impulses_approx</tt><big>(</big><em>*args</em><big>)</big><a class="headerlink" href="#PyKEP.phasing.three_impulses_approx" title="Permalink to this definition">¶</a></dt>
<dd><p>DV = PyKEP.phasing.three_impulses_approx(pl1, pl2, ep1=None, ep2=None)</p>
<ul class="simple">
<li>pl1: departure planet</li>
<li>pl2: arrival planet</li>
<li>ep1: departure epoch (optional and only useful for non keplerian planets)</li>
<li>ep1: arrival epoch (default value is ep1).</li>
<li>[out] DV: estimated DV cost for the orbital trab=nsfer</li>
</ul>
<p>Returns the DV in m/s necessary for an orbit transfer between pl1 and pl2 assuming a perfect phasing.
The transfer will be made of three impulses. One to match apogees, one to match inclination and RAAN and
one to match perigees. Two of the three impulses will be merged together at either departure or arrival.
The argument of perigee is not matched, so that this approximation is only good for near-circular orbits.</p>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">DV</span> <span class="o">=</span> <span class="n">three_impulses_approx</span><span class="p">(</span><span class="n">pl1</span><span class="p">,</span> <span class="n">pl2</span><span class="p">)</span>
<span class="n">DV</span> <span class="o">=</span> <span class="n">three_impulses_approx</span><span class="p">(</span><span class="n">pl1</span><span class="p">,</span> <span class="n">pl2</span><span class="p">,</span> <span class="n">ep1</span> <span class="o">=</span> <span class="n">epoch</span><span class="p">(</span><span class="mi">5500</span><span class="p">))</span>
<span class="n">DV</span> <span class="o">=</span> <span class="n">three_impulses_approx</span><span class="p">(</span><span class="n">pl1</span><span class="p">,</span> <span class="n">pl2</span><span class="p">,</span> <span class="n">ep1</span> <span class="o">=</span> <span class="n">epoch</span><span class="p">(</span><span class="mi">5500</span><span class="p">),</span> <span class="n">ep2</span> <span class="o">=</span> <span class="n">epoch</span><span class="p">(</span><span class="mi">5700</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2015, PyKEP Development Team.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.1.<br/>
    </p>
  </div>
</footer>
  </body>
</html>